env:
  - USER=travis

os:
  - windows
  - linux
  - osx

sudo: false

language: go

go:
  - 1.11.x
  - master

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then choco install make  ; fi
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then choco install mingw ; fi

script:
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then export CGO_ENABLED=0 ; fi
  - GOMAXPROCS=2 make ci

branches:
  only:
    - master

matrix:
  allow_failures:
    - go: master
  fast_finish: true
