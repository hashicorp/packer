env:
  - USER=travis

os:
  - windows
  - linux
  - osx

sudo: false

language: go

go:
  - 1.11.x
  - master

before_install:
  - >
    if [[ "$TRAVIS_OS_NAME" == "windows" ]];
    then choco install -y make mingw;
    export PATH=/c/tools/mingw64/bin:"$PATH";
    fi

script:
  - df -h
  - GOMAXPROCS=2 make ci

branches:
  only:
    - master

matrix:
  allow_failures:
    - go: master
  fast_finish: true
