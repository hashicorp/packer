---
description: |
  The `packer hcl2_upgrade` Packer command is used to transpile a JSON
  configuration template to it's formatted HCL2 counterpart. The command will
  return a zero exit status on success, and a non-zero exit status on failure.
layout: docs
page_title: packer hcl2_upgrade - Commands
sidebar_title: <tt>hcl2_upgrade</tt>
---

-> **Note:** This command is Beta, and currently being improved upon; do not
hesitate [opening a new
issue](https://github.com/hashicorp/packer/issues/new/choose) if you find
something wrong.

# `hcl2_upgrade` Command

The `packer hcl2_upgrade` Packer command is used to transpile a JSON
configuration template to it's formatted HCL2 counterpart. The command will
return a zero exit status on success, and a non-zero exit status on failure.

Example usage:

```shell-session
$ packer hcl2_upgrade my-template.json

Successfully created my-template.json.pkr.hcl
```

## Go template functions

`hcl2_upgrade` will do its best to transform your go _template calls_ to HCL2,
for example:
  - ```{{ build `ID` }}``` becomes ```${build.ID}```.
  - ```{{ user `my_var` }}``` becomes ```${var.my_var}```.
  - ```{{ env `my_var` }}``` becomes ```${var.my_var}```. Packer HCL2 supports 
    environment variables through input variables. See
    [docs](http://localhost:3000/docs/from-1.5/variables#environment-variables)
    for more info.
  - ```{{ timestamp }}``` becomes ```${local.timestamp}```, the local variable
    will be created for all generated files.
  - ```{{ .HTTPIP }}```, ```{{ .HTTPPort }}```, ```{{ vault_key }}```,
    ```{{ consul_key }}```, ```{{ aws_secretsmanager }}``` do not change yet
    and will remain similar.

-> **Note**: The `hcl2_upgrade` command does its best to transform template
calls to their JSON counterpart, but it might fail. I that case the
`hcl2_upgrade` command will simply output the local HCL2 block without
transformation and with the error message in a comment. We are currently
working on improving this part of the transformer.

## Options

- `-output-file` - File where to put the hcl2 generated config. Defaults to
  JSON_TEMPLATE.pkr.hcl